<?xml version="1.0" encoding="utf-8" ?>
<local:BaseContentPage 
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:local="clr-namespace:HorusStudio.Maui.MaterialDesignControls.Sample.Pages"
    xmlns:material="clr-namespace:HorusStudio.Maui.MaterialDesignControls;assembly=HorusStudio.Maui.MaterialDesignControls"
    xmlns:vm="clr-namespace:HorusStudio.Maui.MaterialDesignControls.Sample.ViewModels"
    xmlns:views="clr-namespace:HorusStudio.Maui.MaterialDesignControls.Sample.Views"
    x:Class="HorusStudio.Maui.MaterialDesignControls.Sample.Pages.RadioButtonPage"
    x:TypeArguments="vm:RadioButtonViewModel"
    x:DataType="vm:RadioButtonViewModel"
    BackgroundColor="{AppThemeBinding Light={x:Static material:MaterialLightTheme.Surface}, Dark={x:Static material:MaterialDarkTheme.Surface}}">
    <ContentPage.Resources>
        <ControlTemplate x:Key="RadioButtonTemplate">
            <Border
                Stroke="#b1b1b3"
                StrokeThickness="2"
                StrokeShape="RoundRectangle 10"
                HorizontalOptions="Center"
                BackgroundColor="#b1b1b3"
                HeightRequest="60"
                WidthRequest="60"
                VerticalOptions="Start">
                <VisualStateManager.VisualStateGroups>
                    <VisualStateGroupList>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Checked">
                                <VisualState.Setters>
                                    <Setter Property="Stroke"
                                            Value="#247339" />
                                    <Setter TargetName="check"
                                            Property="Opacity"
                                            Value="1" />
                                    <Setter TargetName="uncheck"
                                            Property="Opacity"
                                            Value="0" />
                                </VisualState.Setters>
                            </VisualState>
                            <VisualState x:Name="Unchecked">
                                <VisualState.Setters>
                                    <Setter TargetName="check"
                                            Property="Opacity"
                                            Value="0" />
                                    <Setter TargetName="uncheck"
                                            Property="Opacity"
                                            Value="1" />
                                    <Setter Property="BackgroundColor"
                                            Value="#b1b1b3" />
                                    <Setter Property="Stroke"
                                            Value="#b1b1b3" />
                                </VisualState.Setters>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <VisualState.Setters>
                                    <Setter TargetName="disabled"
                                            Property="Opacity"
                                            Value="1" />
                                    <Setter TargetName="check"
                                            Property="Opacity"
                                            Value="0" />
                                    <Setter TargetName="uncheck"
                                            Property="Opacity"
                                            Value="0" />
                                    <Setter Property="BackgroundColor"
                                            Value="#b1b1b3" />
                                    <Setter Property="Stroke"
                                            Value="#b1b1b3" />
                                </VisualState.Setters>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateGroupList>
                </VisualStateManager.VisualStateGroups>
                <Grid
                    Margin="4"
                    WidthRequest="90">
                    <Grid
                        Margin="0,0,4,0"
                        WidthRequest="20"
                        HeightRequest="20"
                        HorizontalOptions="Center"
                        VerticalOptions="Center">
                        <Image
                            Source="radio_button_unchecked.png"
                            x:Name="uncheck"
                            WidthRequest="20"
                            Opacity="0"
                            HeightRequest="20"
                            HorizontalOptions="Center"
                            VerticalOptions="Center" />
                        <Image
                            x:Name="check"
                            Opacity="0"
                            Source="radio_button_checked.png"
                            WidthRequest="20"
                            HeightRequest="20"
                            HorizontalOptions="Center"
                            VerticalOptions="Center" />
                        <Image
                            x:Name="disabled"
                            Opacity="0"
                            Source="plus.png"
                            WidthRequest="20"
                            HeightRequest="20"
                            HorizontalOptions="Center"
                            VerticalOptions="Center" />
                    </Grid>
                    <ContentPresenter />
                </Grid>
            </Border>
        </ControlTemplate>

        <Style TargetType="material:MaterialRadioButton" x:Key="MaterialRadioButtonWithControlTemplate">
            <Setter Property="ControlTemplate"
                    Value="{StaticResource RadioButtonTemplate}" />
        </Style>

        <Style x:Key="VisualStateManagerStyle"
               TargetType="material:MaterialRadioButton">
            <Setter Property="VisualStateManager.VisualStateGroups">
                <VisualStateGroupList>
                    <VisualStateGroup x:Name="CommonStates">
                        <VisualState x:Name="Disabled">
                            <VisualState.Setters>
                                <Setter Property="StrokeColor"
                                        Value="Orange" />
                                <Setter Property="TextColor"
                                        Value="DarkRed" />
                            </VisualState.Setters>
                        </VisualState>
                        <VisualState x:Name="Unchecked">
                            <VisualState.Setters>
                                <Setter Property="StrokeColor"
                                        Value="DarkBlue" />
                                <Setter Property="TextColor"
                                        Value="DarkGreen" />
                            </VisualState.Setters>
                        </VisualState>
                        <VisualState x:Name="Checked">
                            <VisualState.Setters>
                                <Setter Property="StrokeColor"
                                        Value="Green" />
                                <Setter Property="TextColor"
                                        Value="DarkCyan" />
                            </VisualState.Setters>
                        </VisualState>
                    </VisualStateGroup>
                </VisualStateGroupList>
            </Setter>
        </Style>
    </ContentPage.Resources>
    <views:ControlPageWithTopAppBar>
        <views:ControlPageWithTopAppBar.PageContent>
            <VerticalStackLayout Spacing="8">
                <material:MaterialLabel Style="{StaticResource SectionTitle}" Text="Normal" />
                <material:MaterialCard Style="{StaticResource CardControlContainer}">
                    <VerticalStackLayout 
                        Spacing="0"
                        material:MaterialViewGroup.GroupName="SampleGroup1">
                        <material:MaterialRadioButton 
                            Text="Radio button 1" />
                        <material:MaterialRadioButton 
                            Text="Radio button 2" />
                        <material:MaterialRadioButton 
                            Text="Radio button 3" />
                        <material:MaterialRadioButton 
                            Text="Radio button 4" />
                    </VerticalStackLayout>
                </material:MaterialCard>
                <material:MaterialLabel Text="Normal MaterialRadioButton with default properties. MaterialRadioButtons are automatically grouped by sharing the same parent, without the need to use the GroupName property." Type="BodySmall" />

                <material:MaterialLabel Style="{StaticResource SectionTitle}" Text="Changing some properties" />
                <material:MaterialCard Style="{StaticResource CardControlContainer}">
                    <VerticalStackLayout 
                        material:MaterialViewGroup.GroupName="SettingProperties"
                        Spacing="0">
                        <material:MaterialRadioButton 
                            Text="Radio button 1" 
                            StrokeColor="DarkOrange" 
                            TextColor="DarkGreen" 
                            FontAttributes="Bold" />

                        <material:MaterialRadioButton 
                            Text="Radio button 2"
                            StrokeColor="DarkOrange"
                            TextColor="DarkGreen"
                            CharacterSpacing="5" />

                        <material:MaterialRadioButton 
                            Text="Radio button 3"
                            StrokeColor="DarkOrange"
                            FontSize="25"
                            TextColor="DarkGreen" />

                        <material:MaterialRadioButton 
                            Text="Radio button 4"
                            StrokeColor="DarkOrange"
                            TextColor="DarkGreen"/>
                    </VerticalStackLayout>
                </material:MaterialCard>
                <material:MaterialLabel Text="We can set stroke color, text color, text size, font attributes, text transform, characters spacing and other properties. MaterialRadioButtons are grouped using the GroupName property." Type="BodySmall" />

                <material:MaterialLabel Style="{StaticResource SectionTitle}" Text="Using attached properties" />
                <material:MaterialCard Style="{StaticResource CardControlContainer}">
                    <VerticalStackLayout
                        Spacing="8">
                        <VerticalStackLayout 
                            material:MaterialViewGroup.GroupName="SingleGroupSample" 
                            material:MaterialViewGroup.SelectionType="Single"
                            material:MaterialViewGroup.SelectedValue="{Binding CheckedColor}"
                            material:MaterialViewGroup.SelectedValueChangedCommand="{Binding CheckChangedCommand}"
                            BindableLayout.ItemsSource="{Binding ItemsSourceColors}">
                            <BindableLayout.ItemTemplate>
                                <DataTemplate x:DataType="vm:CustomColor">
                                    <StackLayout>
                                        <material:MaterialRadioButton 
                                            Text="{Binding Color}"
                                            Value="{Binding .}" />
                                    </StackLayout>
                                </DataTemplate>
                            </BindableLayout.ItemTemplate>
                        </VerticalStackLayout>
                        <material:MaterialLabel
                            Text="{Binding CheckedColorText}"
                            HorizontalTextAlignment="Center" />
                    </VerticalStackLayout>
                </material:MaterialCard>
                <material:MaterialLabel 
                    Text="We are creating radio buttons using MaterialViewGroup's attachable properties: GroupName, SelectionType (Single), SelectedValue and SelectedValueChangedCommand." Type="BodySmall" />

                <material:MaterialLabel Style="{StaticResource SectionTitle}" Text="SelectionType: Multiple" />
                <material:MaterialCard Style="{StaticResource CardControlContainer}">
                    <StackLayout
                        Spacing="8">
                        <VerticalStackLayout 
                            Spacing="0"
                            material:MaterialViewGroup.GroupName="MultipleGroupSample"
                            material:MaterialViewGroup.SelectionType="Multiple"
                            material:MaterialViewGroup.SelectedValues="{Binding SelectedRadioButtons}"
                            material:MaterialViewGroup.SelectedValueChangedCommand="{Binding ShowSelectedRadioButtonsCommand}">
                            <material:MaterialRadioButton 
                                Text="Option 1" />
                            <material:MaterialRadioButton 
                                Text="Option 2" />
                            <material:MaterialRadioButton 
                                Text="Option 3" />
                        </VerticalStackLayout>
                        <material:MaterialLabel
                            Text="{Binding SelectedRadioButtonsText}"
                            HorizontalTextAlignment="Center" />
                    </StackLayout>
                </material:MaterialCard>
                <material:MaterialLabel 
                    Text="We are creating radio buttons using MaterialViewGroup's attachable properties: GroupName, SelectionType (Multiple), SelectedValue and SelectedValueChangedCommand." Type="BodySmall" />
                
                <material:MaterialLabel Style="{StaticResource SectionTitle}" Text="Using control template and define a group name" />
                <material:MaterialCard Style="{StaticResource CardControlContainer}">
                    <HorizontalStackLayout 
                        material:MaterialViewGroup.GroupName="ControlTemplate"
                        HorizontalOptions="Center" 
                        Spacing="4">
                        <material:MaterialRadioButton 
                            Style="{StaticResource MaterialRadioButtonWithControlTemplate}" />
                        <material:MaterialRadioButton 
                            Style="{StaticResource MaterialRadioButtonWithControlTemplate}" />
                        <material:MaterialRadioButton 
                            Style="{StaticResource MaterialRadioButtonWithControlTemplate}" />
                    </HorizontalStackLayout>
                </material:MaterialCard>
                <material:MaterialLabel Text="Using Control Template to change the appearance of the Material Radio Button" Type="BodySmall" />

                <material:MaterialLabel Style="{StaticResource SectionTitle}" Text="Custom events, new style and text side changing" />
                <material:MaterialCard Style="{StaticResource CardControlContainer}">
                    <VerticalStackLayout 
                        material:MaterialViewGroup.GroupName="Events"
                        Spacing="0">
                        <material:MaterialRadioButton 
                            Text="Radio button 1"
                            Style="{StaticResource VisualStateManagerStyle}"
                            TextSide="Left"
                            IsEnabled="{Binding IsRadioButtonEnabled}"
                            CheckedChanged="MaterialRadioButton_CheckedChanged" />
                        <material:MaterialRadioButton 
                            Text="Radio button 2"
                            TextSide="Left"
                            IsEnabled="{Binding IsRadioButtonEnabled}"
                            Style="{StaticResource VisualStateManagerStyle}"
                            CheckedChangedCommand="{Binding CheckedChangedCommand}" />
                        <material:MaterialRadioButton 
                            Text="Radio button 3"
                            TextSide="Left"
                            IsEnabled="{Binding IsRadioButtonEnabled}"
                            Style="{StaticResource VisualStateManagerStyle}" />
                        <material:MaterialSwitch Text="Is enabled" IsToggled="{Binding IsRadioButtonEnabled}" /> 
                    </VerticalStackLayout>
                </material:MaterialCard>
                <material:MaterialLabel Text="Setting events, new style using visual state manager and text side" Type="BodySmall" />
            </VerticalStackLayout>
        </views:ControlPageWithTopAppBar.PageContent>
    </views:ControlPageWithTopAppBar>
</local:BaseContentPage>